define(["jquery"],function(o){"use strict";return{init:function(){o(".banner-top").parents(".no-overflow").removeClass("no-overflow");o(".menucontroler").on("mouseover touchstart",function(){var t=o(this),e=t.parents(".box_resources");if(0!=e.length){var a=o(e[0]);a.find(".selected").removeClass("selected"),a.find("[data-rel]").hide(),a.find('[data-rel="'+t.attr("data-type")+'"]').show(),t.addClass("selected")}}),o(".menucontroler").on("touchend",function(){var t=o('[data-rel="'+o(this).attr("data-type")+'"]');o("html, body").animate({scrollTop:t.offset().top},500)}),o(".attachedimages").each(function(){var a=o(this);a.find("br").remove(),a.find("img").first().addClass("active");var t=function(){var t=a.find("img.active"),e=t.next("img");t.removeClass("active"),0<e.length?e.addClass("active"):a.find("img").first().addClass("active")};if(0<a.find("img").length){a.find("img").on("click",t);var e=o('<div class="slide-control" data-action="before">&#60;</div>');e.on("click",function(){var t=a.find("img.active"),e=t.prev("img");t.removeClass("active"),0<e.length?e.addClass("active"):a.find("img").last().addClass("active")}),a.append(e);var i=o('<div class="slide-control" data-action="after">&#62;</div>');i.on("click",t),a.append(i)}else a.hide()}),o("completion.complete").parents(".completion-parent").addClass("complete"),o("completion.incomplete").parents(".completion-parent").addClass("incomplete"),o("[data-dhbg-toggle]").on("click",function(){var t=o(this),e=t.attr("data-dhbg-toggle"),a=t.attr("data-target");o(a).toggleClass(e)}),o(".tepuy-wf").each(function(){var t=o(this);t.wrapInner("<div class='tepuy-body'></div>");var e="";t.attr("data-tepuy-width")&&(e+="width:"+t.attr("data-tepuy-width")+";"),t.attr("data-tepuy-height")&&(e+="height:"+t.attr("data-tepuy-height")+";");var a=o('<div class="tepuy-close">X</div>');a.on("click",function(){t.hide({effect:"slide",direction:"down"})}),""!=e&&t.attr("style",e),t.append(a),t.hide()}),o(".tepuy-wf-controller").on("click",function(){var t=o(this),e=t.attr("data-tepuy-width"),a=t.attr("data-tepuy-height"),i=o(t.attr("data-tepuy-content"));e&&i.css("width",e),a&&i.css("height",a),i.show({effect:"slide",direction:"down"})}),o(".tepuy-w").each(function(){var e=o(this);e.wrapInner("<div class='tepuy-body'></div>");var t="";e.attr("data-tepuy-width")&&(t+="width:"+e.attr("data-tepuy-width")+";"),e.attr("data-tepuy-height")&&(t+="height:"+e.attr("data-tepuy-height")+";"),""!=t&&e.attr("style",t),e.attr("data-tepuy-showentry")?o.get(M.cfg.wwwroot+"/mod/glossary/showentry_ajax.php",{eid:e.attr("data-tepuy-showentry")},function(t){0<t.entries.length&&e.find(".tepuy-body").html(t.entries[0].definition)},"json"):e.attr("data-tepuy-innerentry")&&0<e.find("a.glossary.autolink").length&&(o.get(e.find("a.glossary.autolink").attr("href").replace("showentry.php","showentry_ajax.php"),function(t){0<t.entries.length&&e.find(".tepuy-body").html(t.entries[0].definition)},"json"),e.attr("title",e.find("a.glossary.autolink").attr("title"))),e.hide()}),o(".tepuy-w-controller").on("click",function(t){t.preventDefault();var e=o(this);if(!(d=e.data("dialogue"))){var a=e.attr("data-tepuy-width"),i=e.attr("data-tepuy-height"),n={center:!0,modal:!0,visible:!1,draggable:!1,width:"auto",height:"auto",autofillheight:"header",bodyContent:o(e.attr("data-tepuy-content")+" .tepuy-body")};a&&(n.width=a),i&&(n.height=i);var d=new M.core.dialogue(n);e.data("dialogue",d)}d.show()})}}});
